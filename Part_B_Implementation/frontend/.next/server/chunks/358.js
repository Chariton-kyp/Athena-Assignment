"use strict";exports.id=358,exports.ids=[358],exports.modules={7629:(a,b,c)=>{c.d(b,{p:()=>g});var d=c(21124),e=c(38301),f=c(15514);let g=e.forwardRef(({className:a,type:b,...c},e)=>(0,d.jsx)("input",{type:b,className:(0,f.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));g.displayName="Input"},32475:(a,b,c)=>{c.d(b,{W:()=>i});var d=c(21124),e=c(46078),f=c(22544),g=c(58390);let h={[g.kY.PENDING]:"pending",[g.kY.APPROVED]:"approved",[g.kY.REJECTED]:"rejected",[g.kY.EDITED]:"edited",[g.kY.EXPORTED]:"exported"};function i({status:a}){let b=(0,e.useTranslations)("status");return(0,d.jsx)(f.E,{variant:h[a],children:b(a)})}},33847:(a,b,c)=>{c.d(b,{T:()=>g});var d=c(21124),e=c(38301),f=c(15514);let g=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("textarea",{className:(0,f.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:c,...b}));g.displayName="Textarea"},37029:(a,b,c)=>{c.d(b,{U:()=>n});var d=c(21124),e=c(38301),f=c(75219),g=c(14263),h=c(33305),i=c(19217),j=c(33847),k=c(66275),l=c(92066),m=c(877);function n({recordId:a,isOpen:b,onClose:c,onSuccess:n}){let[o,p]=(0,e.useState)(""),{toast:q}=(0,m.dj)(),r=(0,l.zH)(),s=async()=>{try{await r.mutateAsync({id:a,request:{notes:o||void 0}}),q({title:"Record Approved",description:"The record has been approved and is ready for export.",variant:"success"}),p(""),c(),n?.()}catch(a){q({title:"Approval Failed",description:"Failed to approve the record. Please try again.",variant:"destructive"})}};return(0,d.jsx)(h.lG,{open:b,onOpenChange:a=>!a&&c(),children:(0,d.jsxs)(h.Cf,{children:[(0,d.jsxs)(h.c7,{children:[(0,d.jsxs)(h.L3,{className:"flex items-center gap-2",children:[(0,d.jsx)(f.A,{className:"h-5 w-5 text-green-600"}),"Approve Record"]}),(0,d.jsx)(h.rr,{children:"Confirm that the extracted data is correct and ready for export."})]}),(0,d.jsx)("div",{className:"space-y-4 py-4",children:(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(k.J,{htmlFor:"notes",children:"Notes (optional)"}),(0,d.jsx)(j.T,{id:"notes",placeholder:"Add any notes about this approval...",value:o,onChange:a=>p(a.target.value),rows:3})]})}),(0,d.jsxs)(h.Es,{children:[(0,d.jsx)(i.$,{variant:"outline",onClick:c,disabled:r.isPending,children:"Cancel"}),(0,d.jsxs)(i.$,{onClick:s,disabled:r.isPending,variant:"success",children:[r.isPending?(0,d.jsx)(g.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,d.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Approve"]})]})]})})}},42524:(a,b,c)=>{c.d(b,{R:()=>p});var d=c(21124),e=c(38301),f=c(78460),g=c(14263),h=c(81100),i=c(33305),j=c(19217),k=c(7629),l=c(33847),m=c(66275),n=c(92066),o=c(877);function p({record:a,isOpen:b,onClose:c,onSuccess:k}){let[p,t]=(0,e.useState)({}),[u,v]=(0,e.useState)(""),{toast:w}=(0,o.dj)(),x=(0,n.UB)(),y=(a,b)=>{t(c=>({...c,[a]:b}))},z=async()=>{try{await x.mutateAsync({id:a.id,request:{data:p,notes:u||void 0}}),w({title:"Record Updated",description:"The record has been updated successfully.",variant:"success"}),c(),k?.()}catch(a){w({title:"Update Failed",description:"Failed to update the record. Please try again.",variant:"destructive"})}},A=a.extraction.record_type;return(0,d.jsx)(i.lG,{open:b,onOpenChange:a=>!a&&c(),children:(0,d.jsxs)(i.Cf,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,d.jsxs)(i.c7,{children:[(0,d.jsxs)(i.L3,{className:"flex items-center gap-2",children:[(0,d.jsx)(f.A,{className:"h-5 w-5"}),"Edit Record Data"]}),(0,d.jsx)(i.rr,{children:"Modify the extracted data before approval. Changes are saved separately from the original extraction."})]}),(0,d.jsxs)("div",{className:"space-y-4 py-4",children:["FORM"===A&&(0,d.jsx)(q,{data:p,onChange:y}),"EMAIL"===A&&(0,d.jsx)(r,{data:p,onChange:y}),"INVOICE"===A&&(0,d.jsx)(s,{data:p,onChange:y}),(0,d.jsxs)("div",{className:"space-y-2 pt-4 border-t",children:[(0,d.jsx)(m.J,{htmlFor:"edit-notes",children:"Edit Notes (optional)"}),(0,d.jsx)(l.T,{id:"edit-notes",placeholder:"Describe what was changed...",value:u,onChange:a=>v(a.target.value),rows:2})]})]}),(0,d.jsxs)(i.Es,{children:[(0,d.jsx)(j.$,{variant:"outline",onClick:c,disabled:x.isPending,children:"Cancel"}),(0,d.jsxs)(j.$,{onClick:z,disabled:x.isPending,children:[x.isPending?(0,d.jsx)(g.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,d.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Save Changes"]})]})]})})}function q({data:a,onChange:b}){return(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(m.J,{htmlFor:"full_name",children:"Full Name"}),(0,d.jsx)(k.p,{id:"full_name",value:a.full_name||"",onChange:a=>b("full_name",a.target.value)})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(m.J,{htmlFor:"email",children:"Email"}),(0,d.jsx)(k.p,{id:"email",type:"email",value:a.email||"",onChange:a=>b("email",a.target.value)})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(m.J,{htmlFor:"phone",children:"Phone"}),(0,d.jsx)(k.p,{id:"phone",value:a.phone||"",onChange:a=>b("phone",a.target.value)})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(m.J,{htmlFor:"company",children:"Company"}),(0,d.jsx)(k.p,{id:"company",value:a.company||"",onChange:a=>b("company",a.target.value)})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(m.J,{htmlFor:"service_interest",children:"Service Interest"}),(0,d.jsx)(k.p,{id:"service_interest",value:a.service_interest||"",onChange:a=>b("service_interest",a.target.value)})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(m.J,{htmlFor:"message",children:"Message"}),(0,d.jsx)(l.T,{id:"message",value:a.message||"",onChange:a=>b("message",a.target.value),rows:3})]})]})}function r({data:a,onChange:b}){return(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(m.J,{htmlFor:"sender_name",children:"Sender Name"}),(0,d.jsx)(k.p,{id:"sender_name",value:a.sender_name||"",onChange:a=>b("sender_name",a.target.value)})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(m.J,{htmlFor:"sender_email",children:"Sender Email"}),(0,d.jsx)(k.p,{id:"sender_email",type:"email",value:a.sender_email||"",onChange:a=>b("sender_email",a.target.value)})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(m.J,{htmlFor:"subject",children:"Subject"}),(0,d.jsx)(k.p,{id:"subject",value:a.subject||"",onChange:a=>b("subject",a.target.value)})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(m.J,{htmlFor:"phone",children:"Phone"}),(0,d.jsx)(k.p,{id:"phone",value:a.phone||"",onChange:a=>b("phone",a.target.value)})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(m.J,{htmlFor:"company",children:"Company"}),(0,d.jsx)(k.p,{id:"company",value:a.company||"",onChange:a=>b("company",a.target.value)})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(m.J,{htmlFor:"body",children:"Body"}),(0,d.jsx)(l.T,{id:"body",value:a.body||"",onChange:a=>b("body",a.target.value),rows:4})]})]})}function s({data:a,onChange:b}){return(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(m.J,{htmlFor:"invoice_number",children:"Invoice Number"}),(0,d.jsx)(k.p,{id:"invoice_number",value:a.invoice_number||"",onChange:a=>b("invoice_number",a.target.value)})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(m.J,{htmlFor:"client_name",children:"Client Name"}),(0,d.jsx)(k.p,{id:"client_name",value:a.client_name||"",onChange:a=>b("client_name",a.target.value)})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(m.J,{htmlFor:"client_address",children:"Client Address"}),(0,d.jsx)(k.p,{id:"client_address",value:a.client_address||"",onChange:a=>b("client_address",a.target.value)})]}),(0,d.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(m.J,{htmlFor:"net_amount",children:"Net Amount"}),(0,d.jsx)(k.p,{id:"net_amount",value:a.net_amount||"",onChange:a=>b("net_amount",a.target.value)})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(m.J,{htmlFor:"vat_amount",children:"VAT Amount"}),(0,d.jsx)(k.p,{id:"vat_amount",value:a.vat_amount||"",onChange:a=>b("vat_amount",a.target.value)})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(m.J,{htmlFor:"total_amount",children:"Total Amount"}),(0,d.jsx)(k.p,{id:"total_amount",value:a.total_amount||"",onChange:a=>b("total_amount",a.target.value)})]})]})]})}},55169:(a,b,c)=>{c.d(b,{O:()=>n});var d=c(21124),e=c(38301),f=c(91292),g=c(14263),h=c(33305),i=c(19217),j=c(33847),k=c(66275),l=c(92066),m=c(877);function n({recordId:a,isOpen:b,onClose:c,onSuccess:n}){let[o,p]=(0,e.useState)(""),{toast:q}=(0,m.dj)(),r=(0,l.TG)(),s=async()=>{if(!o.trim())return void q({title:"Reason Required",description:"Please provide a reason for rejection.",variant:"destructive"});try{await r.mutateAsync({id:a,request:{reason:o}}),q({title:"Record Rejected",description:"The record has been rejected and will not be exported."}),p(""),c(),n?.()}catch(a){q({title:"Rejection Failed",description:"Failed to reject the record. Please try again.",variant:"destructive"})}};return(0,d.jsx)(h.lG,{open:b,onOpenChange:a=>!a&&c(),children:(0,d.jsxs)(h.Cf,{children:[(0,d.jsxs)(h.c7,{children:[(0,d.jsxs)(h.L3,{className:"flex items-center gap-2",children:[(0,d.jsx)(f.A,{className:"h-5 w-5 text-red-600"}),"Reject Record"]}),(0,d.jsx)(h.rr,{children:"Provide a reason for rejecting this extraction. This record will not be included in exports."})]}),(0,d.jsx)("div",{className:"space-y-4 py-4",children:(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)(k.J,{htmlFor:"reason",children:["Rejection Reason ",(0,d.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,d.jsx)(j.T,{id:"reason",placeholder:"Explain why this record is being rejected...",value:o,onChange:a=>p(a.target.value),rows:4,required:!0}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground",children:"This reason will be recorded for audit purposes."})]})}),(0,d.jsxs)(h.Es,{children:[(0,d.jsx)(i.$,{variant:"outline",onClick:c,disabled:r.isPending,children:"Cancel"}),(0,d.jsxs)(i.$,{onClick:s,disabled:r.isPending||!o.trim(),variant:"destructive",children:[r.isPending?(0,d.jsx)(g.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,d.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Reject"]})]})]})})}},58390:(a,b,c)=>{c.d(b,{ee:()=>d,kY:()=>e});var d=function(a){return a.FORM="FORM",a.EMAIL="EMAIL",a.INVOICE="INVOICE",a}({}),e=function(a){return a.PENDING="pending",a.APPROVED="approved",a.REJECTED="rejected",a.EDITED="edited",a.EXPORTED="exported",a}({})},66275:(a,b,c)=>{c.d(b,{J:()=>l});var d=c(21124),e=c(38301);c(23312);var f=c(96425),g=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=(0,f.TL)(`Primitive.${b}`),g=e.forwardRef((a,e)=>{let{asChild:f,...g}=a;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,d.jsx)(f?c:b,{...g,ref:e})});return g.displayName=`Primitive.${b}`,{...a,[b]:g}},{}),h=e.forwardRef((a,b)=>(0,d.jsx)(g.label,{...a,ref:b,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));h.displayName="Label";var i=c(26691),j=c(15514);let k=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(h,{ref:c,className:(0,j.cn)(k(),a),...b}));l.displayName=h.displayName},75219:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(23339).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},78460:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(23339).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},91292:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(23339).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])}};