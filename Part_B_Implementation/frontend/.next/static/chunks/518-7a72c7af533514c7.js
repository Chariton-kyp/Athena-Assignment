"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[518],{31123:(e,a,s)=>{s.d(a,{U:()=>u});var n=s(95155),r=s(12115),i=s(42529),t=s(35299),l=s(54679),d=s(97003),c=s(67001),o=s(90235),h=s(48548),m=s(73959);function u(e){let{recordId:a,isOpen:s,onClose:u,onSuccess:p}=e,[x,v]=(0,r.useState)(""),{toast:j}=(0,m.dj)(),g=(0,h.zH)(),y=async()=>{try{await g.mutateAsync({id:a,request:{notes:x||void 0}}),j({title:"Record Approved",description:"The record has been approved and is ready for export.",variant:"success"}),v(""),u(),null==p||p()}catch(e){j({title:"Approval Failed",description:"Failed to approve the record. Please try again.",variant:"destructive"})}};return(0,n.jsx)(l.lG,{open:s,onOpenChange:e=>!e&&u(),children:(0,n.jsxs)(l.Cf,{children:[(0,n.jsxs)(l.c7,{children:[(0,n.jsxs)(l.L3,{className:"flex items-center gap-2",children:[(0,n.jsx)(i.A,{className:"h-5 w-5 text-green-600"}),"Approve Record"]}),(0,n.jsx)(l.rr,{children:"Confirm that the extracted data is correct and ready for export."})]}),(0,n.jsx)("div",{className:"space-y-4 py-4",children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(o.J,{htmlFor:"notes",children:"Notes (optional)"}),(0,n.jsx)(c.T,{id:"notes",placeholder:"Add any notes about this approval...",value:x,onChange:e=>v(e.target.value),rows:3})]})}),(0,n.jsxs)(l.Es,{children:[(0,n.jsx)(d.$,{variant:"outline",onClick:u,disabled:g.isPending,children:"Cancel"}),(0,n.jsxs)(d.$,{onClick:y,disabled:g.isPending,variant:"success",children:[g.isPending?(0,n.jsx)(t.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,n.jsx)(i.A,{className:"mr-2 h-4 w-4"}),"Approve"]})]})]})})}},33789:(e,a,s)=>{s.d(a,{p:()=>t});var n=s(95155),r=s(12115),i=s(25016);let t=r.forwardRef((e,a)=>{let{className:s,type:r,...t}=e;return(0,n.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...t})});t.displayName="Input"},66020:(e,a,s)=>{s.d(a,{ee:()=>n,kY:()=>r});var n=function(e){return e.FORM="FORM",e.EMAIL="EMAIL",e.INVOICE="INVOICE",e}({}),r=function(e){return e.PENDING="pending",e.APPROVED="approved",e.REJECTED="rejected",e.EDITED="edited",e.EXPORTED="exported",e}({})},67001:(e,a,s)=>{s.d(a,{T:()=>t});var n=s(95155),r=s(12115),i=s(25016);let t=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,n.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...r})});t.displayName="Textarea"},67374:(e,a,s)=>{s.d(a,{R:()=>x});var n=s(95155),r=s(12115),i=s(18514),t=s(35299),l=s(46046),d=s(54679),c=s(97003),o=s(33789),h=s(67001),m=s(90235),u=s(48548),p=s(73959);function x(e){let{record:a,isOpen:s,onClose:o,onSuccess:x}=e,[y,f]=(0,r.useState)({}),[N,b]=(0,r.useState)(""),{toast:C}=(0,p.dj)(),_=(0,u.UB)();(0,r.useEffect)(()=>{s&&(f(a.edited_data||a.extraction.form_data||a.extraction.email_data||a.extraction.invoice_data||{}),b(""))},[s,a]);let E=(e,a)=>{f(s=>({...s,[e]:a}))},w=async()=>{try{await _.mutateAsync({id:a.id,request:{data:y,notes:N||void 0}}),C({title:"Record Updated",description:"The record has been updated successfully.",variant:"success"}),o(),null==x||x()}catch(e){C({title:"Update Failed",description:"Failed to update the record. Please try again.",variant:"destructive"})}},F=a.extraction.record_type;return(0,n.jsx)(d.lG,{open:s,onOpenChange:e=>!e&&o(),children:(0,n.jsxs)(d.Cf,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,n.jsxs)(d.c7,{children:[(0,n.jsxs)(d.L3,{className:"flex items-center gap-2",children:[(0,n.jsx)(i.A,{className:"h-5 w-5"}),"Edit Record Data"]}),(0,n.jsx)(d.rr,{children:"Modify the extracted data before approval. Changes are saved separately from the original extraction."})]}),(0,n.jsxs)("div",{className:"space-y-4 py-4",children:["FORM"===F&&(0,n.jsx)(v,{data:y,onChange:E}),"EMAIL"===F&&(0,n.jsx)(j,{data:y,onChange:E}),"INVOICE"===F&&(0,n.jsx)(g,{data:y,onChange:E}),(0,n.jsxs)("div",{className:"space-y-2 pt-4 border-t",children:[(0,n.jsx)(m.J,{htmlFor:"edit-notes",children:"Edit Notes (optional)"}),(0,n.jsx)(h.T,{id:"edit-notes",placeholder:"Describe what was changed...",value:N,onChange:e=>b(e.target.value),rows:2})]})]}),(0,n.jsxs)(d.Es,{children:[(0,n.jsx)(c.$,{variant:"outline",onClick:o,disabled:_.isPending,children:"Cancel"}),(0,n.jsxs)(c.$,{onClick:w,disabled:_.isPending,children:[_.isPending?(0,n.jsx)(t.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,n.jsx)(l.A,{className:"mr-2 h-4 w-4"}),"Save Changes"]})]})]})})}function v(e){let{data:a,onChange:s}=e;return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(m.J,{htmlFor:"full_name",children:"Full Name"}),(0,n.jsx)(o.p,{id:"full_name",value:a.full_name||"",onChange:e=>s("full_name",e.target.value)})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(m.J,{htmlFor:"email",children:"Email"}),(0,n.jsx)(o.p,{id:"email",type:"email",value:a.email||"",onChange:e=>s("email",e.target.value)})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(m.J,{htmlFor:"phone",children:"Phone"}),(0,n.jsx)(o.p,{id:"phone",value:a.phone||"",onChange:e=>s("phone",e.target.value)})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(m.J,{htmlFor:"company",children:"Company"}),(0,n.jsx)(o.p,{id:"company",value:a.company||"",onChange:e=>s("company",e.target.value)})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(m.J,{htmlFor:"service_interest",children:"Service Interest"}),(0,n.jsx)(o.p,{id:"service_interest",value:a.service_interest||"",onChange:e=>s("service_interest",e.target.value)})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(m.J,{htmlFor:"message",children:"Message"}),(0,n.jsx)(h.T,{id:"message",value:a.message||"",onChange:e=>s("message",e.target.value),rows:3})]})]})}function j(e){let{data:a,onChange:s}=e;return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(m.J,{htmlFor:"sender_name",children:"Sender Name"}),(0,n.jsx)(o.p,{id:"sender_name",value:a.sender_name||"",onChange:e=>s("sender_name",e.target.value)})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(m.J,{htmlFor:"sender_email",children:"Sender Email"}),(0,n.jsx)(o.p,{id:"sender_email",type:"email",value:a.sender_email||"",onChange:e=>s("sender_email",e.target.value)})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(m.J,{htmlFor:"subject",children:"Subject"}),(0,n.jsx)(o.p,{id:"subject",value:a.subject||"",onChange:e=>s("subject",e.target.value)})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(m.J,{htmlFor:"phone",children:"Phone"}),(0,n.jsx)(o.p,{id:"phone",value:a.phone||"",onChange:e=>s("phone",e.target.value)})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(m.J,{htmlFor:"company",children:"Company"}),(0,n.jsx)(o.p,{id:"company",value:a.company||"",onChange:e=>s("company",e.target.value)})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(m.J,{htmlFor:"body",children:"Body"}),(0,n.jsx)(h.T,{id:"body",value:a.body||"",onChange:e=>s("body",e.target.value),rows:4})]})]})}function g(e){let{data:a,onChange:s}=e;return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(m.J,{htmlFor:"invoice_number",children:"Invoice Number"}),(0,n.jsx)(o.p,{id:"invoice_number",value:a.invoice_number||"",onChange:e=>s("invoice_number",e.target.value)})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(m.J,{htmlFor:"client_name",children:"Client Name"}),(0,n.jsx)(o.p,{id:"client_name",value:a.client_name||"",onChange:e=>s("client_name",e.target.value)})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(m.J,{htmlFor:"client_address",children:"Client Address"}),(0,n.jsx)(o.p,{id:"client_address",value:a.client_address||"",onChange:e=>s("client_address",e.target.value)})]}),(0,n.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(m.J,{htmlFor:"net_amount",children:"Net Amount"}),(0,n.jsx)(o.p,{id:"net_amount",value:a.net_amount||"",onChange:e=>s("net_amount",e.target.value)})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(m.J,{htmlFor:"vat_amount",children:"VAT Amount"}),(0,n.jsx)(o.p,{id:"vat_amount",value:a.vat_amount||"",onChange:e=>s("vat_amount",e.target.value)})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(m.J,{htmlFor:"total_amount",children:"Total Amount"}),(0,n.jsx)(o.p,{id:"total_amount",value:a.total_amount||"",onChange:e=>s("total_amount",e.target.value)})]})]})]})}},81449:(e,a,s)=>{s.d(a,{O:()=>u});var n=s(95155),r=s(12115),i=s(78874),t=s(35299),l=s(54679),d=s(97003),c=s(67001),o=s(90235),h=s(48548),m=s(73959);function u(e){let{recordId:a,isOpen:s,onClose:u,onSuccess:p}=e,[x,v]=(0,r.useState)(""),{toast:j}=(0,m.dj)(),g=(0,h.TG)(),y=async()=>{if(!x.trim())return void j({title:"Reason Required",description:"Please provide a reason for rejection.",variant:"destructive"});try{await g.mutateAsync({id:a,request:{reason:x}}),j({title:"Record Rejected",description:"The record has been rejected and will not be exported."}),v(""),u(),null==p||p()}catch(e){j({title:"Rejection Failed",description:"Failed to reject the record. Please try again.",variant:"destructive"})}};return(0,n.jsx)(l.lG,{open:s,onOpenChange:e=>!e&&u(),children:(0,n.jsxs)(l.Cf,{children:[(0,n.jsxs)(l.c7,{children:[(0,n.jsxs)(l.L3,{className:"flex items-center gap-2",children:[(0,n.jsx)(i.A,{className:"h-5 w-5 text-red-600"}),"Reject Record"]}),(0,n.jsx)(l.rr,{children:"Provide a reason for rejecting this extraction. This record will not be included in exports."})]}),(0,n.jsx)("div",{className:"space-y-4 py-4",children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)(o.J,{htmlFor:"reason",children:["Rejection Reason ",(0,n.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,n.jsx)(c.T,{id:"reason",placeholder:"Explain why this record is being rejected...",value:x,onChange:e=>v(e.target.value),rows:4,required:!0}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"This reason will be recorded for audit purposes."})]})}),(0,n.jsxs)(l.Es,{children:[(0,n.jsx)(d.$,{variant:"outline",onClick:u,disabled:g.isPending,children:"Cancel"}),(0,n.jsxs)(d.$,{onClick:y,disabled:g.isPending||!x.trim(),variant:"destructive",children:[g.isPending?(0,n.jsx)(t.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,n.jsx)(i.A,{className:"mr-2 h-4 w-4"}),"Reject"]})]})]})})}},87627:(e,a,s)=>{s.d(a,{W:()=>d});var n=s(95155),r=s(95604),i=s(67812),t=s(66020);let l={[t.kY.PENDING]:"pending",[t.kY.APPROVED]:"approved",[t.kY.REJECTED]:"rejected",[t.kY.EDITED]:"edited",[t.kY.EXPORTED]:"exported"};function d(e){let{status:a}=e,s=(0,r.useTranslations)("status");return(0,n.jsx)(i.E,{variant:l[a],children:s(a)})}},90235:(e,a,s)=>{s.d(a,{J:()=>c});var n=s(95155),r=s(12115),i=s(32894),t=s(83101),l=s(25016);let d=(0,t.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,n.jsx)(i.b,{ref:a,className:(0,l.cn)(d(),s),...r})});c.displayName=i.b.displayName}}]);