(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{23:(e,s,t)=>{Promise.resolve().then(t.bind(t,95785))},22320:(e,s,t)=>{"use strict";t.d(s,{EI:()=>i,GT:()=>l,HC:()=>u,I9:()=>o,Kw:()=>p,PE:()=>h,VI:()=>n,c1:()=>v,f8:()=>d,jW:()=>c,o0:()=>m,uw:()=>j,ws:()=>x,yz:()=>f});var r=t(60125);let a="/api/v1/records";async function n(e){return(0,r.Vg)(a,{params:{status:null==e?void 0:e.status,record_type:null==e?void 0:e.record_type,skip:null==e?void 0:e.skip,limit:null==e?void 0:e.limit}})}async function l(){return(0,r.Vg)("".concat(a,"/stats"))}async function i(e){return(0,r.Vg)("".concat(a,"/").concat(e))}async function d(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.$P)("".concat(a,"/").concat(e,"/approve"),s)}async function c(e,s){return(0,r.$P)("".concat(a,"/").concat(e,"/reject"),s)}async function o(e,s){return(0,r.mu)("".concat(a,"/").concat(e),s)}async function u(e){return(0,r.$P)("".concat(a,"/export"),e)}async function x(e,s){return(0,r.$P)("".concat(a,"/approve-batch"),void 0,{params:{notes:s},headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}async function m(e,s){return(0,r.$P)("".concat(a,"/reject-batch"),void 0,{params:{reason:s},headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}function h(e,s){let t=window.URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download=s,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(t)}function p(e){let s=new Date().toISOString().split("T")[0];return"techflow_export_".concat(s,".").concat({csv:"csv",xlsx:"xlsx",json:"json"}[e]||e)}async function f(){return(0,r.Vg)("".concat(a,"/sheets/status"))}async function j(e){return(0,r.$P)("".concat(a,"/sheets/create"),void 0,{params:{title:e}})}async function v(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,r.$P)("".concat(a,"/sheets/sync"),void 0,{params:{spreadsheet_id:e,include_rejected:s}})}},25016:(e,s,t)=>{"use strict";t.d(s,{Yq:()=>l,cn:()=>n,e7:()=>d,vv:()=>i});var r=t(2821),a=t(75889);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.QP)((0,r.$)(s))}function l(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}function i(e){let s="string"==typeof e?parseFloat(e):e;return new Intl.NumberFormat("el-GR",{style:"currency",currency:"EUR"}).format(s)}function d(e){let s=e.split("/");return s[s.length-1]||e}},27346:(e,s,t)=>{"use strict";t.d(s,{F:()=>i});var r=t(95155),a=t(12115),n=t(59034),l=t(25016);let i=a.forwardRef((e,s)=>{let{className:t,children:a,...i}=e;return(0,r.jsxs)(n.bL,{ref:s,className:(0,l.cn)("relative overflow-hidden",t),...i,children:[(0,r.jsx)(n.LM,{className:"h-full w-full rounded-[inherit]",children:a}),(0,r.jsx)(d,{}),(0,r.jsx)(n.OK,{})]})});i.displayName=n.bL.displayName;let d=a.forwardRef((e,s)=>{let{className:t,orientation:a="vertical",...i}=e;return(0,r.jsx)(n.VM,{ref:s,orientation:a,className:(0,l.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...i,children:(0,r.jsx)(n.lr,{className:"relative flex-1 rounded-full bg-border"})})});d.displayName=n.VM.displayName},33789:(e,s,t)=>{"use strict";t.d(s,{p:()=>l});var r=t(95155),a=t(12115),n=t(25016);let l=a.forwardRef((e,s)=>{let{className:t,type:a,...l}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...l})});l.displayName="Input"},44090:(e,s,t)=>{"use strict";t.d(s,{Ug:()=>l,jQ:()=>n,pE:()=>i});var r=t(22454),a=t(22320);let n=e=>["record",e];function l(e){return(0,r.I)({queryKey:["records",e],queryFn:()=>(0,a.VI)(e),staleTime:3e4})}function i(e){return(0,r.I)({queryKey:n(e||""),queryFn:()=>(0,a.EI)(e),enabled:!!e,staleTime:3e4})}},47507:(e,s,t)=>{"use strict";t.d(s,{bq:()=>x,eb:()=>f,gC:()=>p,l6:()=>o,yv:()=>u});var r=t(95155),a=t(12115),n=t(4729),l=t(24033),i=t(12108),d=t(5917),c=t(25016);let o=n.bL;n.YJ;let u=n.WT,x=a.forwardRef((e,s)=>{let{className:t,children:a,...i}=e;return(0,r.jsxs)(n.l9,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[a,(0,r.jsx)(n.In,{asChild:!0,children:(0,r.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]})});x.displayName=n.l9.displayName;let m=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})});m.displayName=n.PP.displayName;let h=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,r.jsx)(l.A,{className:"h-4 w-4"})})});h.displayName=n.wn.displayName;let p=a.forwardRef((e,s)=>{let{className:t,children:a,position:l="popper",...i}=e;return(0,r.jsx)(n.ZL,{children:(0,r.jsxs)(n.UC,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,...i,children:[(0,r.jsx)(m,{}),(0,r.jsx)(n.LM,{className:(0,c.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,r.jsx)(h,{})]})})});p.displayName=n.UC.displayName,a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...a})}).displayName=n.JU.displayName;let f=a.forwardRef((e,s)=>{let{className:t,children:a,...l}=e;return(0,r.jsxs)(n.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.VF,{children:(0,r.jsx)(d.A,{className:"h-4 w-4"})})}),(0,r.jsx)(n.p4,{children:a})]})});f.displayName=n.q7.displayName,a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...a})}).displayName=n.wv.displayName},50003:(e,s,t)=>{"use strict";t.d(s,{J:()=>l,d:()=>n});var r=t(22454),a=t(22320);let n=["stats"];function l(){return(0,r.I)({queryKey:n,queryFn:a.GT,staleTime:3e4,refetchInterval:6e4})}},54664:(e,s,t)=>{"use strict";t.d(s,{w:()=>i});var r=t(95155),a=t(12115),n=t(47321),l=t(25016);let i=a.forwardRef((e,s)=>{let{className:t,orientation:a="horizontal",decorative:i=!0,...d}=e;return(0,r.jsx)(n.b,{ref:s,decorative:i,orientation:a,className:(0,l.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",t),...d})});i.displayName=n.b.displayName},60125:(e,s,t)=>{"use strict";t.d(s,{$P:()=>i,Vg:()=>l,mu:()=>d});class r extends Error{constructor(e,s,t){super("API Error: ".concat(e," ").concat(s)),this.status=e,this.statusText=s,this.data=t,this.name="ApiError"}}async function a(e){if(!e.ok){let s;try{s=await e.json()}catch(e){s=null}throw new r(e.status,e.statusText,s)}let s=e.headers.get("content-type");return(null==s?void 0:s.includes("application/json"))?e.json():(null==s?void 0:s.includes("application/octet-stream"))||(null==s?void 0:s.includes("text/csv"))||(null==s?void 0:s.includes("application/vnd.openxmlformats"))?e.blob():e.text()}function n(e,s){let t=new URL("".concat("http://localhost:7000").concat(e));return s&&Object.entries(s).forEach(e=>{let[s,r]=e;void 0!==r&&t.searchParams.append(s,String(r))}),t.toString()}async function l(e,s){let t=n(e,null==s?void 0:s.params);return a(await fetch(t,{method:"GET",headers:{"Content-Type":"application/json",...null==s?void 0:s.headers},...s}))}async function i(e,s,t){let r=n(e,null==t?void 0:t.params);return a(await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",...null==t?void 0:t.headers},body:s?JSON.stringify(s):void 0,...t}))}async function d(e,s,t){let r=n(e,null==t?void 0:t.params);return a(await fetch(r,{method:"PUT",headers:{"Content-Type":"application/json",...null==t?void 0:t.headers},body:JSON.stringify(s),...t}))}},66020:(e,s,t)=>{"use strict";t.d(s,{ee:()=>r,kY:()=>a});var r=function(e){return e.FORM="FORM",e.EMAIL="EMAIL",e.INVOICE="INVOICE",e}({}),a=function(e){return e.PENDING="pending",e.APPROVED="approved",e.REJECTED="rejected",e.EDITED="edited",e.EXPORTED="exported",e}({})},67812:(e,s,t)=>{"use strict";t.d(s,{E:()=>i});var r=t(95155);t(12115);var a=t(83101),n=t(25016);let l=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",pending:"border-transparent bg-yellow-100 text-yellow-800",approved:"border-transparent bg-green-100 text-green-800",rejected:"border-transparent bg-red-100 text-red-800",edited:"border-transparent bg-blue-100 text-blue-800",exported:"border-transparent bg-purple-100 text-purple-800"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:t}),s),...a})}},68122:(e,s,t)=>{"use strict";t.d(s,{E:()=>n});var r=t(95155),a=t(25016);function n(e){let{className:s,...t}=e;return(0,r.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",s),...t})}},83209:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>l,aR:()=>i});var r=t(95155),a=t(12115),n=t(25016);let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});l.displayName="Card";let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...a})});i.displayName="CardHeader";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});d.displayName="CardTitle";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})});c.displayName="CardDescription";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...a})});o.displayName="CardContent",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},87627:(e,s,t)=>{"use strict";t.d(s,{W:()=>d});var r=t(95155),a=t(95604),n=t(67812),l=t(66020);let i={[l.kY.PENDING]:"pending",[l.kY.APPROVED]:"approved",[l.kY.REJECTED]:"rejected",[l.kY.EDITED]:"edited",[l.kY.EXPORTED]:"exported"};function d(e){let{status:s}=e,t=(0,a.useTranslations)("status");return(0,r.jsx)(n.E,{variant:i[s],children:t(s)})}},95785:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>em});var r=t(95155),a=t(52619),n=t.n(a),l=t(20063),i=t(95604),d=t(82684),c=t(89715),o=t(39867),u=t(97003),x=t(83209),m=t(52056),h=t(26983),p=t(42529),f=t(78874),j=t(68122),v=t(50003),g=t(25016);function y(e){let{title:s,value:t,icon:a,description:n,className:l,isLoading:i}=e;return(0,r.jsxs)(x.Zp,{className:(0,g.cn)("",l),children:[(0,r.jsxs)(x.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(x.ZB,{className:"text-sm font-medium",children:s}),a]}),(0,r.jsx)(x.Wu,{children:i?(0,r.jsx)(j.E,{className:"h-8 w-20"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:null!=t?t:0}),n&&(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:n})]})})]})}function b(){let{data:e,isLoading:s,error:t}=(0,v.J)(),a=(0,i.useTranslations)("dashboard");return t?(0,r.jsx)(x.Zp,{className:"col-span-full",children:(0,r.jsxs)(x.Wu,{className:"flex items-center justify-center py-6",children:[(0,r.jsx)(m.A,{className:"mr-2 h-5 w-5 text-destructive"}),(0,r.jsx)("span",{className:"text-destructive",children:a("allRecords")})]})}):(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsx)(y,{title:a("totalRecords"),value:null==e?void 0:e.total,icon:(0,r.jsx)(c.A,{className:"h-4 w-4 text-muted-foreground"}),description:a("allRecords"),isLoading:s}),(0,r.jsx)(y,{title:a("pendingReview"),value:null==e?void 0:e.pending_count,icon:(0,r.jsx)(h.A,{className:"h-4 w-4 text-yellow-500"}),description:a("awaitingApproval"),className:"border-l-4 border-l-yellow-500",isLoading:s}),(0,r.jsx)(y,{title:a("approved"),value:null==e?void 0:e.approved_count,icon:(0,r.jsx)(p.A,{className:"h-4 w-4 text-green-500"}),description:a("readyForExport"),className:"border-l-4 border-l-green-500",isLoading:s}),(0,r.jsx)(y,{title:a("rejected"),value:null==e?void 0:e.rejected_count,icon:(0,r.jsx)(f.A,{className:"h-4 w-4 text-red-500"}),description:a("declinedRecords"),className:"border-l-4 border-l-red-500",isLoading:s})]})}var N=t(26991),w=t(78765),R=t(12235),E=t(69386),T=t(23508),_=t(7620);let A={pending:"#eab308",approved:"#22c55e",rejected:"#ef4444",edited:"#3b82f6",exported:"#a855f7"};function C(){let{data:e,isLoading:s,error:t}=(0,v.J)(),a=(0,i.useTranslations)("status"),n=(0,i.useTranslations)("dashboard");if(s)return(0,r.jsxs)(x.Zp,{children:[(0,r.jsx)(x.aR,{children:(0,r.jsx)(x.ZB,{children:n("recordsByStatus")})}),(0,r.jsx)(x.Wu,{children:(0,r.jsx)(j.E,{className:"h-[250px] w-full"})})]});if(t||!e)return(0,r.jsxs)(x.Zp,{children:[(0,r.jsx)(x.aR,{children:(0,r.jsx)(x.ZB,{children:n("recordsByStatus")})}),(0,r.jsx)(x.Wu,{className:"flex h-[250px] items-center justify-center",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"Unable to load chart"})})]});let l=Object.entries(e.by_status||{}).filter(e=>{let[s,t]=e;return t>0}).map(e=>{let[s,t]=e;return{name:a(s),value:t,color:A[s]||"#6b7280"}});return 0===l.length?(0,r.jsxs)(x.Zp,{children:[(0,r.jsx)(x.aR,{children:(0,r.jsx)(x.ZB,{children:n("recordsByStatus")})}),(0,r.jsx)(x.Wu,{className:"flex h-[250px] items-center justify-center",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"No records to display"})})]}):(0,r.jsxs)(x.Zp,{children:[(0,r.jsx)(x.aR,{children:(0,r.jsx)(x.ZB,{children:n("recordsByStatus")})}),(0,r.jsx)(x.Wu,{children:(0,r.jsx)(N.u,{width:"100%",height:250,children:(0,r.jsxs)(w.r,{children:[(0,r.jsx)(R.F,{data:l,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:l.map((e,s)=>(0,r.jsx)(E.f,{fill:e.color},"cell-".concat(s)))}),(0,r.jsx)(T.m,{formatter:e=>[e,"Records"],contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),(0,r.jsx)(_.s,{})]})})})]})}var k=t(98128),I=t(68425),P=t(47734),O=t(73697),F=t(16533);let Z={FORM:"#3b82f6",EMAIL:"#10b981",INVOICE:"#f59e0b"};function B(){let{data:e,isLoading:s,error:t}=(0,v.J)(),a=(0,i.useTranslations)("extraction"),n=(0,i.useTranslations)("dashboard");if(s)return(0,r.jsxs)(x.Zp,{children:[(0,r.jsx)(x.aR,{children:(0,r.jsx)(x.ZB,{children:n("recordsByType")})}),(0,r.jsx)(x.Wu,{children:(0,r.jsx)(j.E,{className:"h-[250px] w-full"})})]});if(t||!e)return(0,r.jsxs)(x.Zp,{children:[(0,r.jsx)(x.aR,{children:(0,r.jsx)(x.ZB,{children:n("recordsByType")})}),(0,r.jsx)(x.Wu,{className:"flex h-[250px] items-center justify-center",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"Unable to load chart"})})]});let l={FORM:a("forms"),EMAIL:a("emails"),INVOICE:a("invoices")},d=Object.entries(e.by_type||{}).map(e=>{let[s,t]=e;return{name:l[s]||s,count:t,fill:Z[s]||"#6b7280"}});return 0===d.length?(0,r.jsxs)(x.Zp,{children:[(0,r.jsx)(x.aR,{children:(0,r.jsx)(x.ZB,{children:n("recordsByType")})}),(0,r.jsx)(x.Wu,{className:"flex h-[250px] items-center justify-center",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"No records to display"})})]}):(0,r.jsxs)(x.Zp,{children:[(0,r.jsx)(x.aR,{children:(0,r.jsx)(x.ZB,{children:n("recordsByType")})}),(0,r.jsx)(x.Wu,{children:(0,r.jsx)(N.u,{width:"100%",height:250,children:(0,r.jsxs)(k.E,{data:d,layout:"vertical",children:[(0,r.jsx)(I.d,{strokeDasharray:"3 3",horizontal:!1}),(0,r.jsx)(P.W,{type:"number"}),(0,r.jsx)(O.h,{dataKey:"name",type:"category",width:80}),(0,r.jsx)(T.m,{formatter:e=>[e,"Records"],contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),(0,r.jsx)(F.y,{dataKey:"count",radius:[0,4,4,0],fill:"#3b82f6"})]})})})]})}var D=t(52987),S=t(67812),V=t(44090),W=t(66020);let L={[W.kY.PENDING]:"pending",[W.kY.APPROVED]:"approved",[W.kY.REJECTED]:"rejected",[W.kY.EDITED]:"edited",[W.kY.EXPORTED]:"exported"};function $(){let{data:e,isLoading:s,error:t}=(0,V.Ug)({limit:5}),a=(0,i.useTranslations)("dashboard"),l=(0,i.useTranslations)("status"),d=(0,i.useTranslations)("type");if(s)return(0,r.jsxs)(x.Zp,{children:[(0,r.jsxs)(x.aR,{children:[(0,r.jsx)(x.ZB,{children:a("recentActivity")}),(0,r.jsx)(x.BT,{children:a("latestRecords")})]}),(0,r.jsx)(x.Wu,{children:(0,r.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(j.E,{className:"h-10 w-10 rounded-full"}),(0,r.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,r.jsx)(j.E,{className:"h-4 w-[200px]"}),(0,r.jsx)(j.E,{className:"h-3 w-[150px]"})]}),(0,r.jsx)(j.E,{className:"h-6 w-16"})]},s))})})]});if(t)return(0,r.jsxs)(x.Zp,{children:[(0,r.jsxs)(x.aR,{children:[(0,r.jsx)(x.ZB,{children:a("recentActivity")}),(0,r.jsx)(x.BT,{children:a("latestRecords")})]}),(0,r.jsx)(x.Wu,{className:"flex h-[200px] items-center justify-center",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"Unable to load recent activity"})})]});let o=(null==e?void 0:e.records)||[];return(0,r.jsxs)(x.Zp,{children:[(0,r.jsxs)(x.aR,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(x.ZB,{children:a("recentActivity")}),(0,r.jsx)(x.BT,{children:a("latestRecords")})]}),(0,r.jsx)(u.$,{variant:"ghost",size:"sm",asChild:!0,children:(0,r.jsxs)(n(),{href:"/records",children:[a("viewAll"),(0,r.jsx)(D.A,{className:"ml-2 h-4 w-4"})]})})]}),(0,r.jsx)(x.Wu,{children:0===o.length?(0,r.jsx)("div",{className:"flex h-[200px] items-center justify-center",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"No records yet"})}):(0,r.jsx)("div",{className:"space-y-4",children:o.map(e=>{var s;return(0,r.jsxs)(n(),{href:"/records/".concat(e.id),className:"flex items-center gap-4 rounded-lg p-2 transition-colors hover:bg-muted",children:[(0,r.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-muted",children:(0,r.jsx)(c.A,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"truncate text-sm font-medium",children:(0,g.e7)(e.extraction.source_file)}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(s=e.extraction.record_type,({[W.ee.FORM]:d("form"),[W.ee.EMAIL]:d("email"),[W.ee.INVOICE]:d("invoice")})[s]||s)," -"," ",(0,g.Yq)(e.created_at)]})]}),(0,r.jsx)(S.E,{variant:L[e.status],children:l(e.status)})]},e.id)})})})]})}var M=t(12115),q=t(22454),U=t(80549),J=t(23664),Y=t(53409),z=t(95740),K=t(6132),G=t(35299),X=t(89559),H=t(86651),Q=t(65229),ee=t(27937),es=t(33789),et=t(47507),er=t(27346),ea=t(54664),en=t(87627),el=t(60125);let ei="/api/v1/search";async function ed(e){return(0,el.$P)(ei,e)}async function ec(){return(0,el.Vg)("".concat(ei,"/stats"))}async function eo(e){return(0,el.$P)("".concat(ei,"/embeddings/generate"),{record_ids:e})}function eu(e){let{onResultClick:s,className:t}=e,[a,n]=(0,M.useState)(""),[l,d]=(0,M.useState)("all"),[o,m]=(0,M.useState)("all"),[h,p]=(0,M.useState)(!1),f=(0,i.useTranslations)("search"),j=(0,i.useTranslations)("type"),v=(0,i.useTranslations)("status");var y=a;let[b,N]=(0,M.useState)(y);(0,M.useEffect)(()=>{let e=setTimeout(()=>{N(y)},300);return()=>{clearTimeout(e)}},[y,300]);let{data:w,refetch:R}=(0,q.I)({queryKey:["embeddingStats"],queryFn:ec,refetchOnWindowFocus:!1}),E=(0,U.n)({mutationFn:ed}),T=(0,U.n)({mutationFn:()=>eo(),onSuccess:()=>{R()}}),_=(0,M.useCallback)(()=>{a.trim()&&(E.mutate({query:a.trim(),limit:10,min_similarity:.3,record_type:"all"===l?void 0:l,status:"all"===o?void 0:o}),p(!0))},[a,l,o,E]),A=e=>{switch(e){case"FORM":return(0,r.jsx)(c.A,{className:"h-4 w-4 text-blue-500"});case"EMAIL":return(0,r.jsx)(J.A,{className:"h-4 w-4 text-purple-500"});case"INVOICE":return(0,r.jsx)(Y.A,{className:"h-4 w-4 text-green-500"});default:return(0,r.jsx)(c.A,{className:"h-4 w-4"})}},C=e=>"".concat(Math.round(100*e),"%"),k=w&&w.records_without_embeddings>0;return w&&w.total_embeddings,(0,r.jsxs)(x.Zp,{className:(0,g.cn)("w-full",t),children:[(0,r.jsx)(x.aR,{className:"pb-3",children:(0,r.jsxs)(x.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,r.jsx)(z.A,{className:"h-5 w-5 text-yellow-500"}),f("title")]})}),(0,r.jsxs)(x.Wu,{className:"space-y-4",children:[k&&(0,r.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-yellow-200 bg-yellow-50 p-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-yellow-800",children:[(0,r.jsx)(K.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"text-sm",children:f("embeddingsNeeded",{count:w.records_without_embeddings})})]}),(0,r.jsxs)(u.$,{size:"sm",variant:"outline",onClick:()=>T.mutate(),disabled:T.isPending,children:[T.isPending?(0,r.jsx)(G.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,r.jsx)(X.A,{className:"mr-2 h-4 w-4"}),f("generateEmbeddings")]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(H.A,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,r.jsx)(es.p,{placeholder:f("placeholder"),value:a,onChange:e=>n(e.target.value),onKeyDown:e=>{"Enter"===e.key&&_(),"Escape"===e.key&&p(!1)},className:"pl-9 pr-9"}),a&&(0,r.jsx)(u.$,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 h-7 w-7 -translate-y-1/2",onClick:()=>{n(""),p(!1),E.reset()},children:(0,r.jsx)(Q.A,{className:"h-4 w-4"})})]}),(0,r.jsx)(u.$,{onClick:_,disabled:!a.trim()||E.isPending,children:E.isPending?(0,r.jsx)(G.A,{className:"h-4 w-4 animate-spin"}):f("searchButton")})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(et.l6,{value:l,onValueChange:d,children:[(0,r.jsx)(et.bq,{className:"w-[140px]",children:(0,r.jsx)(et.yv,{placeholder:f("typeFilter")})}),(0,r.jsxs)(et.gC,{children:[(0,r.jsx)(et.eb,{value:"all",children:f("allTypes")}),(0,r.jsx)(et.eb,{value:"FORM",children:j("form")}),(0,r.jsx)(et.eb,{value:"EMAIL",children:j("email")}),(0,r.jsx)(et.eb,{value:"INVOICE",children:j("invoice")})]})]}),(0,r.jsxs)(et.l6,{value:o,onValueChange:m,children:[(0,r.jsx)(et.bq,{className:"w-[140px]",children:(0,r.jsx)(et.yv,{placeholder:f("statusFilter")})}),(0,r.jsxs)(et.gC,{children:[(0,r.jsx)(et.eb,{value:"all",children:f("allStatuses")}),(0,r.jsx)(et.eb,{value:"pending",children:v("pending")}),(0,r.jsx)(et.eb,{value:"approved",children:v("approved")}),(0,r.jsx)(et.eb,{value:"rejected",children:v("rejected")})]})]})]}),h&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ea.w,{}),(0,r.jsxs)("div",{className:"space-y-2",children:[E.isPending&&(0,r.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,r.jsx)(G.A,{className:"h-6 w-6 animate-spin text-muted-foreground"})}),E.isSuccess&&0===E.data.results.length&&(0,r.jsx)("div",{className:"py-8 text-center text-muted-foreground",children:f("noResults",{query:E.data.query})}),E.isSuccess&&E.data.results.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[(0,r.jsx)("span",{children:f("foundResults",{count:E.data.total})}),(0,r.jsxs)("span",{className:"text-xs",children:[f("aiModel"),": ",E.data.model]})]}),(0,r.jsx)(er.F,{className:"h-[300px]",children:(0,r.jsx)("div",{className:"space-y-2",children:E.data.results.map(e=>(0,r.jsx)(ex,{result:e,getRecordIcon:A,formatSimilarity:C,onClick:s},e.record.id))})})]}),E.isError&&(0,r.jsx)("div",{className:"py-4 text-center text-destructive",children:f("searchFailed")})]})]})]})]})}function ex(e){var s,t,a,l,i,d;let{result:c,getRecordIcon:o,formatSimilarity:u,onClick:x}=e,m=c.record,h=m.extraction;return(0,r.jsx)(n(),{href:"/records/".concat(m.id),children:(0,r.jsxs)("div",{className:"flex items-center gap-3 rounded-lg border p-3 transition-colors hover:bg-muted/50 cursor-pointer",onClick:e=>{x&&(e.preventDefault(),x(m.id))},children:[(0,r.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted",children:o(h.record_type)}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"font-medium truncate",children:(null==(s=h.form_data)?void 0:s.full_name)?h.form_data.full_name:(null==(t=h.email_data)?void 0:t.sender_name)?h.email_data.sender_name:(null==(a=h.invoice_data)?void 0:a.client_name)?h.invoice_data.client_name:h.source_file}),(0,r.jsx)(en.W,{status:m.status})]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:(null==(l=h.form_data)?void 0:l.service_interest)?h.form_data.service_interest:(null==(i=h.email_data)?void 0:i.subject)?h.email_data.subject:(null==(d=h.invoice_data)?void 0:d.invoice_number)?h.invoice_data.invoice_number:h.record_type}),c.highlight&&(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-1",children:c.highlight})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(S.E,{variant:"secondary",className:"font-mono",children:u(c.similarity)}),(0,r.jsx)(ee.A,{className:"h-4 w-4 text-muted-foreground"})]})]})})}function em(){let e=(0,l.useRouter)(),s=(0,i.useTranslations)("dashboard");return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:s("title")}),(0,r.jsx)("p",{className:"text-muted-foreground",children:s("subtitle")})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(u.$,{asChild:!0,children:(0,r.jsxs)(n(),{href:"/extraction",children:[(0,r.jsx)(d.A,{className:"mr-2 h-4 w-4"}),s("extractNewFiles")]})}),(0,r.jsx)(u.$,{variant:"outline",asChild:!0,children:(0,r.jsxs)(n(),{href:"/records",children:[(0,r.jsx)(c.A,{className:"mr-2 h-4 w-4"}),s("viewAll")]})})]})]}),(0,r.jsx)(eu,{onResultClick:s=>{e.push("/records/".concat(s))}}),(0,r.jsx)(b,{}),(0,r.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,r.jsx)(C,{}),(0,r.jsx)(B,{})]}),(0,r.jsxs)("div",{className:"grid gap-6 md:grid-cols-3",children:[(0,r.jsx)("div",{className:"md:col-span-2",children:(0,r.jsx)($,{})}),(0,r.jsxs)(x.Zp,{children:[(0,r.jsxs)(x.aR,{children:[(0,r.jsx)(x.ZB,{children:s("quickActions")}),(0,r.jsx)(x.BT,{children:s("commonWorkflows")})]}),(0,r.jsxs)(x.Wu,{className:"space-y-4",children:[(0,r.jsx)(u.$,{className:"w-full justify-start",variant:"outline",asChild:!0,children:(0,r.jsxs)(n(),{href:"/extraction",children:[(0,r.jsx)(d.A,{className:"mr-2 h-4 w-4"}),s("extractNewFiles")]})}),(0,r.jsx)(u.$,{className:"w-full justify-start",variant:"outline",asChild:!0,children:(0,r.jsxs)(n(),{href:"/records?status=pending",children:[(0,r.jsx)(c.A,{className:"mr-2 h-4 w-4"}),s("reviewPending")]})}),(0,r.jsx)(u.$,{className:"w-full justify-start",variant:"outline",asChild:!0,children:(0,r.jsxs)(n(),{href:"/records?status=approved",children:[(0,r.jsx)(o.A,{className:"mr-2 h-4 w-4"}),s("exportApproved")]})})]})]})]}),(0,r.jsx)(x.Zp,{className:"border-blue-200 bg-blue-50",children:(0,r.jsxs)(x.Wu,{className:"flex items-start gap-4 pt-6",children:[(0,r.jsx)("div",{className:"rounded-full bg-blue-100 p-2",children:(0,r.jsx)(c.A,{className:"h-5 w-5 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-blue-900",children:s("hitlWorkflow")}),(0,r.jsx)("p",{className:"text-sm text-blue-700",children:s("hitlDescription")})]})]})})]})}},97003:(e,s,t)=>{"use strict";t.d(s,{$:()=>c,r:()=>d});var r=t(95155),a=t(12115),n=t(32467),l=t(83101),i=t(25016);let d=(0,l.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-green-600 text-white hover:bg-green-700",warning:"bg-yellow-500 text-white hover:bg-yellow-600"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,s)=>{let{className:t,variant:a,size:l,asChild:c=!1,...o}=e,u=c?n.DX:"button";return(0,r.jsx)(u,{className:(0,i.cn)(d({variant:a,size:l,className:t})),ref:s,...o})});c.displayName="Button"}},e=>{e.O(0,[707,704,193,204,163,259,441,255,358],()=>e(e.s=23)),_N_E=e.O()}]);