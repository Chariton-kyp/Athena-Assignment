(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[315],{18514:(e,s,l)=>{"use strict";l.d(s,{A:()=>a});let a=(0,l(71847).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},26983:(e,s,l)=>{"use strict";l.d(s,{A:()=>a});let a=(0,l(71847).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},32894:(e,s,l)=>{"use strict";l.d(s,{b:()=>d});var a=l(12115);l(47650);var t=l(32467),i=l(95155),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let l=(0,t.TL)(`Primitive.${s}`),n=a.forwardRef((e,a)=>{let{asChild:t,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(t?l:s,{...n,ref:a})});return n.displayName=`Primitive.${s}`,{...e,[s]:n}},{}),r=a.forwardRef((e,s)=>(0,i.jsx)(n.label,{...e,ref:s,onMouseDown:s=>{var l;s.target.closest("button, input, select, textarea")||(null==(l=e.onMouseDown)||l.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));r.displayName="Label";var d=r},42529:(e,s,l)=>{"use strict";l.d(s,{A:()=>a});let a=(0,l(71847).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},42754:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>R});var a=l(95155),t=l(52619),i=l.n(t),n=l(20063),r=l(95604),d=l(35626),c=l(97003),o=l(12115),u=l(52056),m=l(89715),x=l(42529),v=l(78874),h=l(18514);let j=(0,l(71847).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var p=l(26983),f=l(83209),N=l(67812),y=l(54664),b=l(68122),g=l(87627),w=l(31123),_=l(81449),A=l(67374),k=l(44090),C=l(25016),E=l(66020);function I(e){var s;let{recordId:l}=e,{data:t,isLoading:i,error:n,refetch:d}=(0,k.pE)(l),[y,I]=(0,o.useState)(!1),[M,R]=(0,o.useState)(!1),[O,P]=(0,o.useState)(!1),S=(0,r.useTranslations)("records"),q=(0,r.useTranslations)("type"),L=(0,r.useTranslations)("extraction"),Z=(0,r.useTranslations)("reviewInfo");if(i)return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(b.E,{className:"h-20 w-full"}),(0,a.jsx)(b.E,{className:"h-64 w-full"})]});if(n||!t)return(0,a.jsx)(f.Zp,{children:(0,a.jsxs)(f.Wu,{className:"flex flex-col items-center justify-center py-12",children:[(0,a.jsx)(u.A,{className:"h-12 w-12 text-destructive mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold",children:S("recordNotFound")}),(0,a.jsx)("p",{className:"text-muted-foreground",children:S("recordNotFoundMessage")})]})});let $=t.extraction,W=t.status===E.kY.PENDING||t.status===E.kY.EDITED,Y=t.edited_data||$.form_data||$.email_data||$.invoice_data;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(f.Zp,{children:[(0,a.jsxs)(f.aR,{className:"flex flex-row items-start justify-between",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"h-5 w-5"}),(0,a.jsx)(f.ZB,{children:(0,C.e7)($.source_file)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,a.jsx)("span",{children:(s=$.record_type,({FORM:q("form"),EMAIL:q("email"),INVOICE:q("invoice")})[s]||s)}),(0,a.jsx)("span",{children:"|"}),(0,a.jsxs)("span",{children:[S("created")," ",(0,C.Yq)(t.created_at)]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(g.W,{status:t.status}),(0,a.jsxs)(N.E,{variant:"outline",children:[Math.round(100*$.confidence_score),"% ",L("confidence").toLowerCase()]})]})]}),W&&(0,a.jsx)(f.Wu,{children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(c.$,{variant:"success",onClick:()=>I(!0),children:[(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4"}),S("approve")]}),(0,a.jsxs)(c.$,{variant:"destructive",onClick:()=>R(!0),children:[(0,a.jsx)(v.A,{className:"mr-2 h-4 w-4"}),S("reject")]}),(0,a.jsxs)(c.$,{variant:"outline",onClick:()=>P(!0),children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4"}),S("editData")]})]})})]}),$.warnings.length>0&&(0,a.jsx)(f.Zp,{className:"border-yellow-200 bg-yellow-50",children:(0,a.jsxs)(f.Wu,{className:"pt-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-yellow-800",children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:L("warnings")})]}),(0,a.jsx)("ul",{className:"mt-2 list-inside list-disc text-sm text-yellow-700",children:$.warnings.map((e,s)=>(0,a.jsx)("li",{children:e},s))})]})}),(0,a.jsxs)(f.Zp,{children:[(0,a.jsx)(f.aR,{children:(0,a.jsx)(f.ZB,{className:"text-lg",children:t.edited_data?S("editedData"):L("extractedData")})}),(0,a.jsxs)(f.Wu,{children:["FORM"===$.record_type&&(0,a.jsx)(T,{data:Y}),"EMAIL"===$.record_type&&(0,a.jsx)(z,{data:Y}),"INVOICE"===$.record_type&&(0,a.jsx)(D,{data:Y})]})]}),t.reviewed_at&&(0,a.jsxs)(f.Zp,{children:[(0,a.jsx)(f.aR,{children:(0,a.jsx)(f.ZB,{className:"text-lg",children:Z("title")})}),(0,a.jsxs)(f.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,a.jsx)(j,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)("span",{children:[Z("reviewedBy"),": ",t.reviewed_by||"System"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,a.jsx)(p.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)("span",{children:[Z("reviewedAt"),": ",(0,C.Yq)(t.reviewed_at)]})]}),t.review_notes&&(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("span",{className:"font-medium",children:[Z("notes"),":"]}),(0,a.jsx)("p",{className:"mt-1 rounded bg-muted p-2",children:t.review_notes})]})]})]}),y&&(0,a.jsx)(w.U,{recordId:t.id,isOpen:y,onClose:()=>I(!1),onSuccess:()=>d()}),M&&(0,a.jsx)(_.O,{recordId:t.id,isOpen:M,onClose:()=>R(!1),onSuccess:()=>d()}),O&&(0,a.jsx)(A.R,{record:t,isOpen:O,onClose:()=>P(!1),onSuccess:()=>d()})]})}function M(e){let{label:s,value:l}=e;return null==l||""===l?null:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 py-2 border-b last:border-0",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:s}),(0,a.jsx)("span",{className:"col-span-2 font-medium",children:l})]})}function T(e){let{data:s}=e,l=(0,r.useTranslations)("fields");return(0,a.jsxs)("div",{children:[(0,a.jsx)(M,{label:l("fullName"),value:null==s?void 0:s.full_name}),(0,a.jsx)(M,{label:l("email"),value:null==s?void 0:s.email}),(0,a.jsx)(M,{label:l("phone"),value:null==s?void 0:s.phone}),(0,a.jsx)(M,{label:l("company"),value:null==s?void 0:s.company}),(0,a.jsx)(M,{label:l("serviceInterest"),value:null==s?void 0:s.service_interest}),(0,a.jsx)(M,{label:l("priority"),value:null==s?void 0:s.priority}),(null==s?void 0:s.message)&&(0,a.jsxs)("div",{className:"py-2",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:l("message")}),(0,a.jsx)("p",{className:"mt-1 rounded bg-muted p-3 text-sm",children:s.message})]})]})}function z(e){let{data:s}=e,l=(0,r.useTranslations)("fields");return(0,a.jsxs)("div",{children:[(0,a.jsx)(M,{label:l("emailType"),value:null==s?void 0:s.email_type}),(0,a.jsx)(M,{label:l("from"),value:"".concat((null==s?void 0:s.sender_name)||""," <").concat(null==s?void 0:s.sender_email,">")}),(0,a.jsx)(M,{label:l("to"),value:null==s?void 0:s.recipient_email}),(0,a.jsx)(M,{label:l("subject"),value:null==s?void 0:s.subject}),(0,a.jsx)(M,{label:l("date"),value:(null==s?void 0:s.date_sent)?(0,C.Yq)(s.date_sent):null}),(0,a.jsx)(M,{label:l("phone"),value:null==s?void 0:s.phone}),(0,a.jsx)(M,{label:l("company"),value:null==s?void 0:s.company}),(null==s?void 0:s.invoice_number)&&(0,a.jsx)(M,{label:l("invoiceNumber"),value:s.invoice_number}),(null==s?void 0:s.invoice_amount)&&(0,a.jsx)(M,{label:l("totalAmount"),value:(0,C.vv)(s.invoice_amount)}),(null==s?void 0:s.body)&&(0,a.jsxs)("div",{className:"py-2",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:l("body")}),(0,a.jsx)("p",{className:"mt-1 rounded bg-muted p-3 text-sm whitespace-pre-wrap max-h-64 overflow-y-auto",children:s.body})]})]})}function D(e){let{data:s}=e,l=(0,r.useTranslations)("fields");return(0,a.jsxs)("div",{children:[(0,a.jsx)(M,{label:l("invoiceNumber"),value:null==s?void 0:s.invoice_number}),(0,a.jsx)(M,{label:l("invoiceDate"),value:(null==s?void 0:s.invoice_date)?(0,C.Yq)(s.invoice_date):null}),(0,a.jsx)(M,{label:l("clientName"),value:null==s?void 0:s.client_name}),(0,a.jsx)(M,{label:l("clientAddress"),value:null==s?void 0:s.client_address}),(0,a.jsx)(M,{label:l("vatNumber"),value:null==s?void 0:s.client_vat_number}),(null==s?void 0:s.items)&&s.items.length>0&&(0,a.jsxs)("div",{className:"py-4",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:l("items")}),(0,a.jsx)("div",{className:"mt-2 rounded border",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{className:"bg-muted",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2 text-left",children:l("description")}),(0,a.jsx)("th",{className:"p-2 text-right",children:l("quantity")}),(0,a.jsx)("th",{className:"p-2 text-right",children:l("unitPrice")}),(0,a.jsx)("th",{className:"p-2 text-right",children:l("total")})]})}),(0,a.jsx)("tbody",{children:s.items.map((e,s)=>(0,a.jsxs)("tr",{className:"border-t",children:[(0,a.jsx)("td",{className:"p-2",children:e.description}),(0,a.jsx)("td",{className:"p-2 text-right",children:e.quantity}),(0,a.jsx)("td",{className:"p-2 text-right",children:(0,C.vv)(e.unit_price)}),(0,a.jsx)("td",{className:"p-2 text-right",children:(0,C.vv)(e.total)})]},s))})]})})]}),(0,a.jsx)(y.w,{className:"my-4"}),(0,a.jsx)(M,{label:l("netAmount"),value:(0,C.vv)(null==s?void 0:s.net_amount)}),(0,a.jsx)(M,{label:"".concat(l("vatAmount")," (").concat(null==s?void 0:s.vat_rate,"%)"),value:(0,C.vv)(null==s?void 0:s.vat_amount)}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 py-2 font-bold",children:[(0,a.jsx)("span",{children:l("totalAmount")}),(0,a.jsx)("span",{className:"col-span-2",children:(0,C.vv)(null==s?void 0:s.total_amount)})]})]})}function R(){let e=(0,n.useParams)().id,s=(0,r.useTranslations)("records");return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.$,{variant:"ghost",size:"icon",asChild:!0,children:(0,a.jsx)(i(),{href:"/records",children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})}),(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:s("recordDetails")})]}),(0,a.jsx)(I,{recordId:e})]})}},47321:(e,s,l)=>{"use strict";l.d(s,{b:()=>o});var a=l(12115);l(47650);var t=l(32467),i=l(95155),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let l=(0,t.TL)(`Primitive.${s}`),n=a.forwardRef((e,a)=>{let{asChild:t,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(t?l:s,{...n,ref:a})});return n.displayName=`Primitive.${s}`,{...e,[s]:n}},{}),r="horizontal",d=["horizontal","vertical"],c=a.forwardRef((e,s)=>{var l;let{decorative:a,orientation:t=r,...c}=e,o=(l=t,d.includes(l))?t:r;return(0,i.jsx)(n.div,{"data-orientation":o,...a?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"},...c,ref:s})});c.displayName="Separator";var o=c},52056:(e,s,l)=>{"use strict";l.d(s,{A:()=>a});let a=(0,l(71847).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},54664:(e,s,l)=>{"use strict";l.d(s,{w:()=>r});var a=l(95155),t=l(12115),i=l(47321),n=l(25016);let r=t.forwardRef((e,s)=>{let{className:l,orientation:t="horizontal",decorative:r=!0,...d}=e;return(0,a.jsx)(i.b,{ref:s,decorative:r,orientation:t,className:(0,n.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",l),...d})});r.displayName=i.b.displayName},78874:(e,s,l)=>{"use strict";l.d(s,{A:()=>a});let a=(0,l(71847).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},81372:(e,s,l)=>{Promise.resolve().then(l.bind(l,42754))}},e=>{e.O(0,[707,704,305,100,518,441,255,358],()=>e(e.s=81372)),_N_E=e.O()}]);