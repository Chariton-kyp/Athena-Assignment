(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[38],{20120:(e,a,s)=>{"use strict";s.d(a,{$v:()=>j,EO:()=>x,Lt:()=>c,Rx:()=>p,Zr:()=>v,ck:()=>h,r7:()=>f,tv:()=>d,wd:()=>u});var t=s(95155),l=s(12115),r=s(52498),i=s(25016),n=s(97003);let c=r.bL,d=r.l9,o=r.ZL,m=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.hJ,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...l,ref:a})});m.displayName=r.hJ.displayName;let x=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsxs)(o,{children:[(0,t.jsx)(m,{}),(0,t.jsx)(r.UC,{ref:a,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...l})]})});x.displayName=r.UC.displayName;let u=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...s})};u.displayName="AlertDialogHeader";let h=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};h.displayName="AlertDialogFooter";let f=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.hE,{ref:a,className:(0,i.cn)("text-lg font-semibold",s),...l})});f.displayName=r.hE.displayName;let j=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.VY,{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",s),...l})});j.displayName=r.VY.displayName;let p=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.rc,{ref:a,className:(0,i.cn)((0,n.r)(),s),...l})});p.displayName=r.rc.displayName;let v=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.ZD,{ref:a,className:(0,i.cn)((0,n.r)({variant:"outline"}),"mt-2 sm:mt-0",s),...l})});v.displayName=r.ZD.displayName},23664:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},47321:(e,a,s)=>{"use strict";s.d(a,{b:()=>o});var t=s(12115);s(47650);var l=s(32467),r=s(95155),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let s=(0,l.TL)(`Primitive.${a}`),i=t.forwardRef((e,t)=>{let{asChild:l,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(l?s:a,{...i,ref:t})});return i.displayName=`Primitive.${a}`,{...e,[a]:i}},{}),n="horizontal",c=["horizontal","vertical"],d=t.forwardRef((e,a)=>{var s;let{decorative:t,orientation:l=n,...d}=e,o=(s=l,c.includes(s))?l:n;return(0,r.jsx)(i.div,{"data-orientation":o,...t?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"},...d,ref:a})});d.displayName="Separator";var o=d},52056:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},53409:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]])},54664:(e,a,s)=>{"use strict";s.d(a,{w:()=>n});var t=s(95155),l=s(12115),r=s(47321),i=s(25016);let n=l.forwardRef((e,a)=>{let{className:s,orientation:l="horizontal",decorative:n=!0,...c}=e;return(0,t.jsx)(r.b,{ref:a,decorative:n,orientation:l,className:(0,i.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",s),...c})});n.displayName=r.b.displayName},76618:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>ej});var t=s(95155),l=s(52619),r=s.n(l),i=s(95604),n=s(35626),c=s(71847);let d=(0,c.A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var o=s(97003),m=s(83209),x=s(12115);let u=(0,c.A)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);var h=s(6132),f=s(89715),j=s(23664),p=s(53409),v=s(92556),N=s(3468),b=s(72431),g=s(76842),y=s(88142),w=s(66218),A=s(23558),_=s(68946),k="Tabs",[R,C]=(0,N.A)(k,[b.RG]),E=(0,b.RG)(),[F,T]=R(k),M=x.forwardRef((e,a)=>{let{__scopeTabs:s,value:l,onValueChange:r,defaultValue:i,orientation:n="horizontal",dir:c,activationMode:d="automatic",...o}=e,m=(0,w.jH)(c),[x,u]=(0,A.i)({prop:l,onChange:r,defaultProp:null!=i?i:"",caller:k});return(0,t.jsx)(F,{scope:s,baseId:(0,_.B)(),value:x,onValueChange:u,orientation:n,dir:m,activationMode:d,children:(0,t.jsx)(y.sG.div,{dir:m,"data-orientation":n,...o,ref:a})})});M.displayName=k;var S="TabsList",I=x.forwardRef((e,a)=>{let{__scopeTabs:s,loop:l=!0,...r}=e,i=T(S,s),n=E(s);return(0,t.jsx)(b.bL,{asChild:!0,...n,orientation:i.orientation,dir:i.dir,loop:l,children:(0,t.jsx)(y.sG.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:a})})});I.displayName=S;var z="TabsTrigger",D=x.forwardRef((e,a)=>{let{__scopeTabs:s,value:l,disabled:r=!1,...i}=e,n=T(z,s),c=E(s),d=H(n.baseId,l),o=O(n.baseId,l),m=l===n.value;return(0,t.jsx)(b.q7,{asChild:!0,...c,focusable:!r,active:m,children:(0,t.jsx)(y.sG.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":o,"data-state":m?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:d,...i,ref:a,onMouseDown:(0,v.mK)(e.onMouseDown,e=>{r||0!==e.button||!1!==e.ctrlKey?e.preventDefault():n.onValueChange(l)}),onKeyDown:(0,v.mK)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&n.onValueChange(l)}),onFocus:(0,v.mK)(e.onFocus,()=>{let e="manual"!==n.activationMode;m||r||!e||n.onValueChange(l)})})})});D.displayName=z;var P="TabsContent",Z=x.forwardRef((e,a)=>{let{__scopeTabs:s,value:l,forceMount:r,children:i,...n}=e,c=T(P,s),d=H(c.baseId,l),o=O(c.baseId,l),m=l===c.value,u=x.useRef(m);return x.useEffect(()=>{let e=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(g.C,{present:r||m,children:s=>{let{present:l}=s;return(0,t.jsx)(y.sG.div,{"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!l,id:o,tabIndex:0,...n,ref:a,style:{...e.style,animationDuration:u.current?"0s":void 0},children:l&&i})}})});function H(e,a){return"".concat(e,"-trigger-").concat(a)}function O(e,a){return"".concat(e,"-content-").concat(a)}Z.displayName=P;var q=s(25016);let B=x.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(I,{ref:a,className:(0,q.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...l})});B.displayName=I.displayName;let L=x.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(D,{ref:a,className:(0,q.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...l})});L.displayName=D.displayName;let V=x.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(Z,{ref:a,className:(0,q.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...l})});V.displayName=Z.displayName;var $=s(68122),K=s(22454),G=s(46623);let W=["files"];var Y=s(35299),U=s(57828),X=s(46046),J=s(96633),Q=s(52056),ee=s(65229),ea=s(54679),es=s(67812),et=s(54664);function el(e){var a;let{filename:s,data:l,isOpen:r,onClose:n,onSave:c,isSaving:d}=e,m=null==l?void 0:l.extraction,x=(0,i.useTranslations)("extraction"),u=(0,i.useTranslations)("type"),h=(0,i.useTranslations)("common");return(0,t.jsx)(ea.lG,{open:r,onOpenChange:e=>!e&&n(),children:(0,t.jsxs)(ea.Cf,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,t.jsxs)(ea.c7,{children:[(0,t.jsxs)(ea.L3,{className:"flex items-center gap-2",children:[x("previewExtraction"),m&&(0,t.jsx)(es.E,{variant:"secondary",children:(a=m.record_type,({FORM:u("form"),EMAIL:u("email"),INVOICE:u("invoice")})[a]||a)})]}),(0,t.jsxs)(ea.rr,{children:[x("reviewBeforeSaving"),". Source: ",s]})]}),l?(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"text-sm font-medium",children:[x("confidence"),":"]}),(0,t.jsxs)(es.E,{variant:m.confidence_score>=.8?"approved":m.confidence_score>=.5?"pending":"rejected",children:[Math.round(100*m.confidence_score),"%"]})]}),m.warnings.length>0&&(0,t.jsxs)("div",{className:"rounded-lg border border-yellow-200 bg-yellow-50 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-yellow-800",children:[(0,t.jsx)(Q.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"font-medium",children:x("warnings")})]}),(0,t.jsx)("ul",{className:"mt-2 list-inside list-disc text-sm text-yellow-700",children:m.warnings.map((e,a)=>(0,t.jsx)("li",{children:e},a))})]}),m.errors.length>0&&(0,t.jsxs)("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-red-800",children:[(0,t.jsx)(ee.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"font-medium",children:x("errors")})]}),(0,t.jsx)("ul",{className:"mt-2 list-inside list-disc text-sm text-red-700",children:m.errors.map((e,a)=>(0,t.jsx)("li",{children:e},a))})]}),(0,t.jsx)(et.w,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"font-medium",children:x("extractedData")}),m.form_data&&(0,t.jsx)(ei,{data:m.form_data}),m.email_data&&(0,t.jsx)(en,{data:m.email_data}),m.invoice_data&&(0,t.jsx)(ec,{data:m.invoice_data})]})]}):(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsx)($.E,{className:"h-4 w-full"}),(0,t.jsx)($.E,{className:"h-4 w-3/4"}),(0,t.jsx)($.E,{className:"h-4 w-1/2"}),(0,t.jsx)($.E,{className:"h-20 w-full"})]}),(0,t.jsxs)(ea.Es,{children:[(0,t.jsx)(o.$,{variant:"outline",onClick:n,children:h("cancel")}),(0,t.jsxs)(o.$,{onClick:c,disabled:d||!l,children:[d?(0,t.jsx)(Y.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(X.A,{className:"mr-2 h-4 w-4"}),x("saveForReview")]})]})]})})}function er(e){let{label:a,value:s}=e;return null==s||""===s?null:(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[(0,t.jsxs)("span",{className:"text-muted-foreground",children:[a,":"]}),(0,t.jsx)("span",{className:"col-span-2 font-medium",children:s})]})}function ei(e){let{data:a}=e,s=(0,i.useTranslations)("fields");return(0,t.jsxs)("div",{className:"space-y-2 rounded-lg border p-4",children:[(0,t.jsx)(er,{label:s("fullName"),value:a.full_name}),(0,t.jsx)(er,{label:s("email"),value:a.email}),(0,t.jsx)(er,{label:s("phone"),value:a.phone}),(0,t.jsx)(er,{label:s("company"),value:a.company}),(0,t.jsx)(er,{label:s("serviceInterest"),value:a.service_interest}),(0,t.jsx)(er,{label:s("priority"),value:a.priority}),a.message&&(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:[s("message"),":"]}),(0,t.jsx)("p",{className:"mt-1 rounded bg-muted p-2 text-sm",children:a.message})]})]})}function en(e){let{data:a}=e,s=(0,i.useTranslations)("fields");return(0,t.jsxs)("div",{className:"space-y-2 rounded-lg border p-4",children:[(0,t.jsx)(er,{label:s("senderName"),value:a.sender_name}),(0,t.jsx)(er,{label:s("senderEmail"),value:a.sender_email}),(0,t.jsx)(er,{label:s("subject"),value:a.subject}),(0,t.jsx)(er,{label:s("invoiceDate"),value:a.date_sent?(0,q.Yq)(a.date_sent):null}),a.phone&&(0,t.jsx)(er,{label:s("phone"),value:a.phone}),a.company&&(0,t.jsx)(er,{label:s("company"),value:a.company}),a.invoice_number&&(0,t.jsx)(er,{label:s("invoiceNumber"),value:a.invoice_number}),a.invoice_amount&&(0,t.jsx)(er,{label:s("totalAmount"),value:(0,q.vv)(a.invoice_amount)}),a.body&&(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:[s("body"),":"]}),(0,t.jsx)("p",{className:"mt-1 max-h-32 overflow-y-auto rounded bg-muted p-2 text-sm whitespace-pre-wrap",children:a.body})]})]})}function ec(e){let{data:a}=e,s=(0,i.useTranslations)("fields");return(0,t.jsxs)("div",{className:"space-y-2 rounded-lg border p-4",children:[(0,t.jsx)(er,{label:s("invoiceNumber"),value:a.invoice_number}),(0,t.jsx)(er,{label:s("invoiceDate"),value:a.invoice_date?(0,q.Yq)(a.invoice_date):null}),(0,t.jsx)(er,{label:s("clientName"),value:a.client_name}),(0,t.jsx)(er,{label:s("clientAddress"),value:a.client_address}),(0,t.jsx)(er,{label:s("vatNumber"),value:a.client_vat_number}),a.items&&a.items.length>0&&(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:[s("items"),":"]}),(0,t.jsx)("div",{className:"mt-1 rounded border",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{className:"bg-muted",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-2 text-left",children:s("description")}),(0,t.jsx)("th",{className:"p-2 text-right",children:s("quantity")}),(0,t.jsx)("th",{className:"p-2 text-right",children:s("unitPrice")}),(0,t.jsx)("th",{className:"p-2 text-right",children:s("total")})]})}),(0,t.jsx)("tbody",{children:a.items.map((e,a)=>(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsx)("td",{className:"p-2",children:e.description}),(0,t.jsx)("td",{className:"p-2 text-right",children:e.quantity}),(0,t.jsx)("td",{className:"p-2 text-right",children:(0,q.vv)(e.unit_price)}),(0,t.jsx)("td",{className:"p-2 text-right",children:(0,q.vv)(e.total)})]},a))})]})})]}),(0,t.jsx)(et.w,{className:"my-2"}),(0,t.jsx)(er,{label:s("netAmount"),value:(0,q.vv)(a.net_amount)}),(0,t.jsx)(er,{label:"".concat(s("vatAmount")," (").concat(a.vat_rate,"%)"),value:(0,q.vv)(a.vat_amount)}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-sm font-bold",children:[(0,t.jsxs)("span",{children:[s("totalAmount"),":"]}),(0,t.jsx)("span",{className:"col-span-2",children:(0,q.vv)(a.total_amount)})]})]})}var ed=s(48548),eo=s(73959);function em(e){let{files:a,type:s,emptyMessage:l}=e,[r,i]=(0,x.useState)(null),[n,c]=(0,x.useState)(null),[d,m]=(0,x.useState)(null),{toast:u}=(0,eo.dj)(),h=(0,ed.Hg)(),j=(0,ed.XU)(),p=(0,ed.Ud)(),v=async e=>{m(e),i(e);try{let a;switch(s){case"form":a=await h.mutateAsync({filename:e,save:!1});break;case"email":a=await j.mutateAsync({filename:e,save:!1});break;case"invoice":a=await p.mutateAsync({filename:e,save:!1})}c(a)}catch(a){u({title:"Extraction Failed",description:"Failed to extract ".concat(e,". Please try again."),variant:"destructive"}),i(null)}finally{m(null)}},N=async e=>{m(e);try{switch(s){case"form":await h.mutateAsync({filename:e,save:!0});break;case"email":await j.mutateAsync({filename:e,save:!0});break;case"invoice":await p.mutateAsync({filename:e,save:!0})}u({title:"Record Created",description:"".concat(e," extracted and saved for review."),variant:"success"}),r===e&&(i(null),c(null))}catch(a){u({title:"Save Failed",description:"Failed to save ".concat(e,". Please try again."),variant:"destructive"})}finally{m(null)}};return 0===a.length?(0,t.jsx)("div",{className:"flex h-[200px] items-center justify-center text-muted-foreground",children:l}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(J.XI,{children:[(0,t.jsx)(J.A0,{children:(0,t.jsxs)(J.Hj,{children:[(0,t.jsx)(J.nd,{children:"Filename"}),(0,t.jsx)(J.nd,{className:"w-[200px] text-right",children:"Actions"})]})}),(0,t.jsx)(J.BF,{children:a.map(e=>(0,t.jsxs)(J.Hj,{children:[(0,t.jsx)(J.nA,{className:"font-medium",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(f.A,{className:"h-4 w-4 text-muted-foreground"}),e]})}),(0,t.jsx)(J.nA,{className:"text-right",children:(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsxs)(o.$,{variant:"outline",size:"sm",onClick:()=>v(e),disabled:d===e,children:[d===e?(0,t.jsx)(Y.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(U.A,{className:"mr-2 h-4 w-4"}),"Preview"]}),(0,t.jsxs)(o.$,{size:"sm",onClick:()=>N(e),disabled:d===e,children:[d===e?(0,t.jsx)(Y.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(X.A,{className:"mr-2 h-4 w-4"}),"Extract & Save"]})]})})]},e))})]}),r&&(0,t.jsx)(el,{filename:r,data:n,isOpen:!!r,onClose:()=>{i(null),c(null)},onSave:()=>N(r),isSaving:d===r})]})}let ex=(0,c.A)("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);var eu=s(20120);function eh(e){let{totalFiles:a}=e,[s,l]=(0,x.useState)(!1),{toast:r}=(0,eo.dj)(),i=(0,ed.KS)(),n=async()=>{try{let{summary:e}=await i.mutateAsync(!0),a=e.forms_processed+e.emails_processed+e.invoices_processed;r({title:"Batch Extraction Complete",description:"Processed ".concat(a," files. ").concat(e.records_created||0," records created."),variant:e.total_errors>0?"default":"success"}),e.total_errors>0&&r({title:"Some Errors Occurred",description:"".concat(e.total_errors," files failed to process."),variant:"destructive"}),l(!1)}catch(e){r({title:"Batch Extraction Failed",description:"An error occurred during batch extraction.",variant:"destructive"})}};return 0===a?null:(0,t.jsxs)(eu.Lt,{open:s,onOpenChange:l,children:[(0,t.jsx)(eu.tv,{asChild:!0,children:(0,t.jsxs)(o.$,{children:[(0,t.jsx)(ex,{className:"mr-2 h-4 w-4"}),"Extract All (",a,")"]})}),(0,t.jsxs)(eu.EO,{children:[(0,t.jsxs)(eu.wd,{children:[(0,t.jsx)(eu.r7,{children:"Extract All Files?"}),(0,t.jsxs)(eu.$v,{children:["This will extract data from all ",a," files and create records pending review. Each record will need to be approved before export."]})]}),(0,t.jsxs)("div",{className:"rounded-lg border bg-muted/50 p-4",children:[(0,t.jsx)("h4",{className:"font-medium",children:"What happens next:"}),(0,t.jsxs)("ul",{className:"mt-2 list-inside list-disc text-sm text-muted-foreground",children:[(0,t.jsx)("li",{children:"All files will be processed automatically"}),(0,t.jsx)("li",{children:"Extracted data will be saved as pending records"}),(0,t.jsx)("li",{children:"You can review each record in the Records page"}),(0,t.jsx)("li",{children:"Approve, reject, or edit each record before export"})]})]}),(0,t.jsxs)(eu.ck,{children:[(0,t.jsx)(eu.Zr,{disabled:i.isPending,children:"Cancel"}),(0,t.jsx)(eu.Rx,{onClick:e=>{e.preventDefault(),n()},disabled:i.isPending,children:i.isPending?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Y.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ex,{className:"mr-2 h-4 w-4"}),"Extract All Files"]})})]})]})]})}function ef(){let{data:e,isLoading:a,error:s}=(0,K.I)({queryKey:W,queryFn:G.CS,staleTime:3e5}),[l,r]=(0,x.useState)("forms"),n=(0,i.useTranslations)("extraction");if(a)return(0,t.jsxs)(m.Zp,{children:[(0,t.jsx)(m.aR,{children:(0,t.jsxs)(m.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(u,{className:"h-5 w-5"}),n("availableFiles")]})}),(0,t.jsx)(m.Wu,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)($.E,{className:"h-10 w-full"}),(0,t.jsx)($.E,{className:"h-[300px] w-full"})]})})]});if(s)return(0,t.jsxs)(m.Zp,{children:[(0,t.jsx)(m.aR,{children:(0,t.jsxs)(m.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(u,{className:"h-5 w-5"}),n("availableFiles")]})}),(0,t.jsx)(m.Wu,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-destructive",children:[(0,t.jsx)(h.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Failed to load files. Make sure the backend is running."})]})})]});let c=(null==e?void 0:e.files.forms.length)||0,d=(null==e?void 0:e.files.emails.length)||0,o=(null==e?void 0:e.files.invoices.length)||0,v=(null==e?void 0:e.total_count)||0;return(0,t.jsxs)(m.Zp,{children:[(0,t.jsxs)(m.aR,{className:"flex flex-row items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(m.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(u,{className:"h-5 w-5"}),n("availableFiles")]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:n("filesAvailable",{count:v})})]}),(0,t.jsx)(eh,{totalFiles:v})]}),(0,t.jsx)(m.Wu,{children:(0,t.jsxs)(M,{value:l,onValueChange:r,children:[(0,t.jsxs)(B,{className:"grid w-full grid-cols-3",children:[(0,t.jsxs)(L,{value:"forms",className:"flex items-center gap-2",children:[(0,t.jsx)(f.A,{className:"h-4 w-4"}),n("forms")," (",c,")"]}),(0,t.jsxs)(L,{value:"emails",className:"flex items-center gap-2",children:[(0,t.jsx)(j.A,{className:"h-4 w-4"}),n("emails")," (",d,")"]}),(0,t.jsxs)(L,{value:"invoices",className:"flex items-center gap-2",children:[(0,t.jsx)(p.A,{className:"h-4 w-4"}),n("invoices")," (",o,")"]})]}),(0,t.jsx)(V,{value:"forms",className:"mt-4",children:(0,t.jsx)(em,{files:(null==e?void 0:e.files.forms)||[],type:"form",emptyMessage:n("noFormsFound")})}),(0,t.jsx)(V,{value:"emails",className:"mt-4",children:(0,t.jsx)(em,{files:(null==e?void 0:e.files.emails)||[],type:"email",emptyMessage:n("noEmailsFound")})}),(0,t.jsx)(V,{value:"invoices",className:"mt-4",children:(0,t.jsx)(em,{files:(null==e?void 0:e.files.invoices)||[],type:"invoice",emptyMessage:n("noInvoicesFound")})})]})})]})}function ej(){let e=(0,i.useTranslations)("extraction"),a=(0,i.useTranslations)("dashboard");return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.$,{variant:"ghost",size:"icon",asChild:!0,children:(0,t.jsx)(r(),{href:"/",children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})}),(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:e("title")})]}),(0,t.jsx)("p",{className:"ml-10 text-muted-foreground",children:e("subtitle")})]})}),(0,t.jsx)(m.Zp,{className:"border-blue-200 bg-blue-50",children:(0,t.jsxs)(m.Wu,{className:"flex items-start gap-4 pt-6",children:[(0,t.jsx)(d,{className:"h-5 w-5 text-blue-600 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-blue-900",children:a("hitlWorkflow")}),(0,t.jsx)("p",{className:"text-sm text-blue-700",children:e("hitlNotice")})]})]})}),(0,t.jsx)(ef,{})]})}},92763:(e,a,s)=>{Promise.resolve().then(s.bind(s,76618))},96633:(e,a,s)=>{"use strict";s.d(a,{A0:()=>n,BF:()=>c,Hj:()=>d,XI:()=>i,nA:()=>m,nd:()=>o});var t=s(95155),l=s(12115),r=s(25016);let i=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:a,className:(0,r.cn)("w-full caption-bottom text-sm",s),...l})})});i.displayName="Table";let n=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("thead",{ref:a,className:(0,r.cn)("[&_tr]:border-b",s),...l})});n.displayName="TableHeader";let c=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("tbody",{ref:a,className:(0,r.cn)("[&_tr:last-child]:border-0",s),...l})});c.displayName="TableBody",l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("tfoot",{ref:a,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...l})}).displayName="TableFooter";let d=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("tr",{ref:a,className:(0,r.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...l})});d.displayName="TableRow";let o=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("th",{ref:a,className:(0,r.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...l})});o.displayName="TableHead";let m=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("td",{ref:a,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...l})});m.displayName="TableCell",l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("caption",{ref:a,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",s),...l})}).displayName="TableCaption"}},e=>{e.O(0,[707,704,193,305,228,100,441,255,358],()=>e(e.s=92763)),_N_E=e.O()}]);